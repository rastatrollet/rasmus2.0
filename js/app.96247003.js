(function(e){function t(t){for(var i,a,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)a=r[u],s[a]&&p.push(s[a][0]),s[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==s[r]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},a={app:0},s={app:0},o=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-4c1e":"a915e4aa"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-4c1e":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-4c1e":"d1075188"}[e]+".css",a=l.p+i,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var r=s[o],c=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(c===i||c===a))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){r=u[o],c=r.getAttribute("data-href");if(c===i||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.request=i,n(s)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){a[e]=0}));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise(function(t,n){i=s[e]=[t,n]});t.push(i[2]=o);var c,u=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,l.nc&&p.setAttribute("nonce",l.nc),p.src=r(e),c=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+a+")");o.type=i,o.request=a,n[1](o)}s[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,u.appendChild(p)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/rasmus2.0/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("c21b"),a=n.n(i);a.a},1436:function(e,t,n){"use strict";var i=n("3fa3"),a=n.n(i);a.a},"2ede":function(e,t,n){e.exports={tripsTable:"TripsTable_tripsTable_seMaN",showingJourneyDetails:"TripsTable_showingJourneyDetails_2vlip",table:"TripsTable_table_2aCjV",tableHead:"TripsTable_tableHead_35rh1",trip:"TripsTable_trip_3L8k2",tripLine:"TripsTable_tripLine_1UetD",cancelled:"TripsTable_cancelled_2B1S9",tripName:"TripsTable_tripName_1S77x",tripTime:"TripsTable_tripTime_MCuJO",tripNewTime:"TripsTable_tripNewTime_1TU8j",isLate:"TripsTable_isLate_332Tg",tripTrack:"TripsTable_tripTrack_hi4oT",VT:"TripsTable_VT_zu_SE",TV:"TripsTable_TV_1mpPl",SL:"TripsTable_SL_1kF6p"}},"2f3b":function(e,t,n){"use strict";var i=n("b679"),a=n.n(i);t["default"]=a.a},"3fa3":function(e,t,n){},"452a":function(e,t,n){"use strict";var i=n("9ec4"),a=n.n(i);a.a},"55a3":function(e,t,n){"use strict";var i=n("2ede"),a=n.n(i);t["default"]=a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("2dd2");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"top-nav"},[n("Tabs",{attrs:{tabs:e.tabs,"on-click":e.changeTab,"current-tab":e.currentTab}}),n("DigitalClock")],1),n("div",{staticClass:"container"},[n(e.currentTabComponent.componentName,e._b({tag:"component"},"component",e.currentTabComponent.props,!1))],1)])},s=[],o=n("c93e"),r=n("2f62"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{class:e.$style.informationPage},[e.isLoading?n("font-awesome",{class:e.$style.spinner,attrs:{icon:"spinner",spin:""}}):e._e(),n("div",{attrs:{id:e.gdocElementId}}),n("a",{class:e.$style.editLink,attrs:{href:e.editLink}},[e._v("Redigera")])],1)},c=[];n("4917"),n("a481"),n("28a5");const u="499673240843-8f8bn77590948esm040d5cl5s4k32hkq.apps.googleusercontent.com",p="AIzaSyAQVyCYvuXOxLcIMlT68G-ELLSxMVDqDGc",d=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],m=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),f={Datum:"date","Hållplats":"origin",Linje:"sname",Namn:"direction",Tid:"time","Ny tid":"rtTime","Läge":"track",Bakgrund:"fgColor"},h={infoDoc:{fileId:"1TRE1P4EmB3kwlURit8lICniBtRp7aqnhcU8x7D6yzqI",mimeType:"text/html"},manualDepartures:{fileId:"1XSzg87FgHsxUl6UqNfRJtYIkw8wyN0yB3RzIib3JsvM",mimeType:"text/tab-separated-values"}};let g,b,v=!1;async function y(){if(v)return;const e=document.createElement("script");e.addEventListener("load",()=>{v=!0,gapi.load("client:auth2",_)}),e.src="https://apis.google.com/js/api.js",document.body.appendChild(e)}const T=new Promise((e,t)=>{g=e,b=t}).then(()=>{if(gapi.auth2.getAuthInstance().isSignedIn.get())return gapi.auth2.getAuthInstance().signIn()});function _(){gapi.client.init({apiKey:p,clientId:u,discoveryDocs:d,scope:m}).then(g).catch(b)}function L(e){return T.then(()=>D(h.infoDoc).then(t=>k(t,e)).catch(e=>console.error(e)))}function S(){return T.then(()=>D(h.manualDepartures).then(({body:e})=>e).then(e=>{const t=e.split(/\n/),n=t[0].replace(/\n|\r/g,"").split(/\t/);return t.slice(1).map(e=>{const t=e.split(/\t/);return n.reduce((e,n,i)=>{const a=f[n]||n;return e[a]=t[i],e},{})})}))}function D(e){return gapi.client.drive.files.export(e)}function k(e,t){const n=e.body.match(/<body[^>]*>(.*)<\/body><\/html>$/)[1],i=document.getElementById(t);i.innerHTML=n}var w={init:y,printInfoDoc:L,getManualDepartures:S};const $="https://docs.google.com/document/d/1TRE1P4EmB3kwlURit8lICniBtRp7aqnhcU8x7D6yzqI/edit#";var j={name:"InformationPage",data(){return{isLoading:!0,gdocElementId:"gdoc",editLink:$}},mounted(){w.init(),w.printInfoDoc(this.gdocElementId).then(()=>this.isLoading=!1).catch(()=>this.isLoading=!1)}},I=j,O=n("979c"),A=n("2877");function C(e){this["$style"]=O["default"].locals||O["default"]}var E=Object(A["a"])(I,l,c,!1,C,null,null);E.options.__file="InformationPage.vue";var N=E.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"digital-clock"},[e._v("\n  "+e._s(e.hours)+":"+e._s(e.minutes)+":"+e._s(e.seconds)+"\n")])},J=[];function F(e,t,n){let i;return n=n||this,(...a)=>{i&&clearTimeout(i),i=setTimeout(()=>e.apply(n,a),t)}}function R(e){return"none"!==window.getComputedStyle(e).display}var P={name:"DigitalClock",data(){return{intervalId:null,hours:"",minutes:"",seconds:""}},created(){this.handleResize=F(this.handleResize,250)},mounted(){this.updateDateTime(),this.startInterval(),this.handleResize(),window.addEventListener("resize",this.handleResize,!1)},beforeDestroy(){this.stopInterval(),window.removeEventListener("resize",this.handleResize,!1)},methods:{handleResize(){R(this.$el)?this.startInterval():this.stopInterval()},startInterval(){this.stopInterval(),this.intervalId=setInterval(this.updateDateTime,1e3)},stopInterval(){clearInterval(this.intervalId)},updateDateTime(){const e=new Date;this.hours=String(e.getHours()).padStart(2,"0"),this.minutes=String(e.getMinutes()).padStart(2,"0"),this.seconds=String(e.getSeconds()).padStart(2,"0")}}},M=P,B=(n("1436"),Object(A["a"])(M,x,J,!1,null,null,null));B.options.__file="DigitalClock.vue";var U=B.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{class:e.$style.stationInfo},[n("div",{class:e.$style.form},[n("LocationInput",{attrs:{disabled:e.initializing,label:"Hållplats"}})],1),e.location?n("TripsFilter",{attrs:{dict:e.dict}}):e._e(),n("div",{class:e.$style.content},[n("TripsTable",{attrs:{"from-to-label":e.fromToLabel}}),n("JourneyDetails")],1),e.location?n("footer",{class:e.$style.situations},[e._l(e.situations.messages,function(t,i){return n("p",{key:i},[e._v(e._s(t))])}),0===e.situations.messages.length?n("p",[e._v("Inga trafikstörningar.")]):e._e()],2):e._e()],1)},V=[];n("ac6a");const H='<LOGIN authenticationkey="2dfa6ea579bd45e3ac3810eb1a97adb6" />',q={},G={TrainStation({lat:e,long:t,name:n}={},i=500){return n?`\n        <FILTER>\n          <AND>\n            <LIKE name="AdvertisedLocationName" value="/^${n}/" />\n            <EQ name="Advertised" value="true" />\n          </AND>\n        </FILTER>\n      `:e&&t?`\n        <FILTER>\n          <AND>\n            <WITHIN name="Geometry.WGS84" shape="center" value="${t} ${e}" radius="${i}m" />\n            <EQ name="Advertised" value="true" />\n          </AND>\n        </FILTER>\n      `:"<FILTER />"},TrainMessage(e){return`\n      <FILTER>\n        <EQ name="AffectedLocation" value="${e}" />\n      </FILTER>\n    `},TrainAnnouncement(e){return`\n      <FILTER>\n        <AND>\n          <EQ name="Advertised" value="true" />\n          <EQ name="ActivityType" value="Avgang" />\n          <EQ name="LocationSignature" value="${e}" />\n          <GT name="AdvertisedTimeAtLocation" value="$dateadd(00:00:00)" />\n          <LT name="AdvertisedTimeAtLocation" value="$dateadd(05:00:00)" />\n        </AND>\n      </FILTER>\n    `}};function Q(e,...t){return fetch("https://api.trafikinfo.trafikverket.se/v1.3/data.json",{body:`\n      <REQUEST>\n        ${H}\n        <QUERY objecttype="${e}" ${"TrainAnnouncement"===e?'orderby="AdvertisedTimeAtLocation"':""}>\n          ${G[e](...t)}\n        </QUERY>\n      </REQUEST>\n    `,method:"POST",mode:"cors",headers:{"Content-Type":"text/xml"}}).then(e=>{const t=e.json().then(e=>e.RESPONSE.RESULT);return e.ok?t:t.then(e=>Promise.reject(e))}).then(t=>t[0][e]||[]).catch(e=>console.error(e))}function K(e){return console.log(e||"No results"),e}function Y(e){return Object.assign({},e,{name:e.AdvertisedLocationName,id:e.LocationSignature,region:"TV"})}function X({lat:e,lng:t}){return Q("TrainStation",{lat:e,long:t},5e3).then(e=>e.slice(0,5).map(Y))}var W={init(){return Q("TrainStation").then(e=>e.forEach(e=>{q[e.LocationSignature]=e.AdvertisedLocationName}))},getClosestStops:X,getClosestStop(e){return X(e).then(e=>e[0])},getTrafficSituations(e){return Q("TrainMessage",e).then(K).then(e=>({messages:e.map(({ExternalDescription:e})=>e)}))},getDeparturesFrom(e){return Q("TrainAnnouncement",e).then(e=>(e||[]).slice(0,30)).then(K).then(e=>e.map(e=>Object(o["a"])({},e,{id:e.ActivityId,direction:e.ToLocation&&(q[e.ToLocation[0].LocationName]||""),via:e.ViaToLocation&&(q[e.ViaToLocation[0].LocationName]||""),name:`${e.ProductInformation.join(" ")}`,time:e.AdvertisedTimeAtLocation.substr(-8,5),timestamp:new Date(e.AdvertisedTimeAtLocation).getTime(),isLate:!1,track:e.TrackAtLocation,sname:e.ProductInformation[0]})))},findStops(e){return Q("TrainStation",{name:e}).then(e=>e.slice(0,15).map(Y))},stationMap:q};const Z="https://api.vasttrafik.se/bin/rest.exe/v2",ee="https://api.vasttrafik.se/ts/v1/traffic-situations";let te,ne;function ie(e,t){const n=t?`${ee}/${t}/${e}`:ee;return me(n,{Accept:"application/json"}).then(e=>e.reduce((e,{title:t,description:n,affectedLines:i})=>({messages:e.messages.concat(`${t} ${n}`),affectedLines:[].concat(e.affectedLines,i.map(({designation:e})=>e)).filter(e=>e)}),{messages:[]}))}function ae(e,t){const n=new Date,i=n.toISOString().substr(0,10),a=n.toLocaleTimeString().substr(0,5),s=`${Z}/trip?originId=${e}&destId=${t}&date=${i}&time=${a}&format=json`;return me(s).then(e=>be(e.TripList.Trip).map(e=>be(e.Leg)))}function se(e){const t=`${Z}/location.name?input=${encodeURIComponent(e)}&format=json`;return me(t).then(e=>be(e.LocationList.StopLocation).slice(0,5)).then(e=>e.map(e=>Object.assign({},e,{region:"VT"})))}function oe(e){return e.map(e=>{const t=e.rtTime&&e.rtTime!==e.time,n=e.rtTime||e.time,i=e.rtDate||e.date,a=new Date(`${i}T${n}`).getTime();return Object.assign({},e,{region:"VT",cancelled:Boolean(e.cancelled),isLate:t,timestamp:a})})}function re(e,t){const n=new Date,i=n.toISOString().substr(0,10),a=n.toLocaleTimeString().substr(0,5);let s=`${Z}/arrivalBoard?id=${encodeURIComponent(e)}&date=${encodeURIComponent(i)}&time=${encodeURIComponent(a)}&format=json`;return t&&(s=`${s}&timeSpan=${t}`),ce(e,s).then(e=>e.ArrivalBoard.Arrival).then(oe)}function le(e,t){let n=`${Z}/departureBoard?id=${encodeURIComponent(e)}&format=json`;return t&&(n=`${n}&timeSpan=${t}`),ce(e,n).then(e=>e.DepartureBoard.Departure||[]).then(oe)}function ce(e,t){return me(t).then(e=>{const t=e.error,n=e.errorText;return(t||n)&&console.error("[getTimeTable]",t||n),e})}function ue({south:e,west:t,north:n,east:i}){const a=e=>Math.round(1e6*e),s=`${Z}/livemap?minx=${a(t)}&miny=${a(e)}&maxx=${a(i)}&maxy=${a(n)}&onlyRealtime=yes`;return me(s).then(({livemap:e})=>e.vehicles)}function pe(e){return me(e).then(({JourneyDetail:e})=>e)}function de(e){return me(e).then(({Geometry:e})=>e)}function me(e,t){const n=Promise.resolve(),i=Object(o["a"])({},t,{Authorization:`Bearer ${te}`});return(!ne||ne.getTime()<Date.now())&&(console.log("Need to update authtoken"),n.then(he)),n.then(()=>fetch(e,{headers:i})).then(ge)}function fe({lat:e,lng:t},n=5,i=!0){const a=`${Z}/location.nearbystops?originCoordLat=${e}&originCoordLong=${t}&maxNo=${2*n}&format=json`;return me(a).then(e=>{if(e.LocationList.errorText)throw new Error(e.LocationList.errorText);return e.LocationList.StopLocation?e.LocationList.StopLocation.filter(({name:e},t,n)=>{const i=n.findIndex(t=>t.name===e);return i===t}).map(e=>Object(o["a"])({},e,{region:"VT"})).slice(0,n):[]}).catch(a=>{if(!i)throw console.error("[getClosestStops]",a),a;console.error("[getClosestStops]:",a,"retrying"),fe({lat:e,lng:t},n,!1)})}function he(){return fetch("https://api.vasttrafik.se:443/token",{headers:{Authorization:"Basic b1pZclV2c1ZGTG8zZ2FSemNaS0NUbEdJX21ZYTo4bTlLNnFsaDVNQXBWRFdRYlVWSUhneWZja3dh","Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"grant_type=client_credentials"}).then(ge).then(e=>{return te=e.access_token,ne=new Date(Date.now()+1e3*e.expires_in),console.log(`AuthToken expires ${ne.toLocaleString()}`),e.access_token})}function ge(e){return e.ok?e.json():e.json().then(e=>Promise.reject(e))}function be(e){return e?[].concat(e):[]}const ve=he();function ye(){return ve}var Te={init:ye,getClosestStop:e=>fe(e,1),getClosestStops:fe,findStops:se,getGeometry:de,getJourneyDetail:pe,getTripSuggestion:ae,getDeparturesFrom:le,getArrivalsTo:re,getTrafficSituations:ie,getLiveMap:ue,transformTrips:oe};const _e="http://api.sl.se/api2",Le={method:"GET"},Se={7:"gray",10:"#1C7F2A",11:"#1C7F2A",12:"gray",13:"#D51427",14:"#D51427",17:"#60A42B",18:"#60A42B",19:"#60A42B",21:"brown",22:"orange",25:"turquoise",26:"turquoise",27:"purple",28:"purple",29:"purple",40:"pink",41:"pink",42:"pink",43:"pink",44:"pink",45:"pink",48:"pink"};function De(e){return Se[e]||"#A4A5A7"}function ke(e){return Object(o["a"])({},e,{HafasId:e.id,id:e.id.substr(-4),region:"SL"})}function we({lat:e,lng:t},n=5){const i="bf8e1f49392843a19e86ef1ccbaa15a0",a=`nearbystops.json?key=${i}&originCoordLat=${e}&originCoordLong=${t}&maxresults=${n}`;return xe(a).then(e=>{const t=Array.from(e.LocationList.StopLocation);return t.map(ke)})}function $e(e){return we(e,1)[0]}function je(e){const t="76ea4bd8c1014b6490418de04bfd0b32",n=`typeahead.json?key=${t}&searchstring=${encodeURIComponent(e)}&maxresults=5`;return xe(n).then(e=>Ne(e.ResponseData)).then(e=>e.filter((t,n)=>{const i=e.findIndex(({SiteId:e})=>e===t.SiteId);return i>=n}).slice(0,5).map(e=>Object(o["a"])({},e,{name:e.Name,id:e.SiteId,region:"SL"})))}const Ie={BUS:"Buss",METRO:"T-bana",SHIP:"Båt",TRAIN:"Tåg",TRAM:"Spårvagn"};function Oe(e){return Ie[e]||e}function Ae(e){const t="a312919085a9447d839109b9a6880d20",n=`realtimedeparturesV4.json?key=${t}&siteid=${e}&timewindow=30`;return xe(n).then(e=>[...e.ResponseData.Buses,...e.ResponseData.Metros,...e.ResponseData.Ships,...e.ResponseData.Trains,...e.ResponseData.Trams].map(e=>Object(o["a"])({},e,{fgColor:De(e.LineNumber),bgColor:"white",direction:e.Destination,timestamp:new Date(e.ExpectedDateTime||e.TimeTabledDateTime).getTime(),time:e.TimeTabledDateTime.substr(11,5),rtTime:e.ExpectedDateTime.substr(11,5),name:`${Oe(e.TransportMode)} ${e.LineNumber}`,sname:e.LineNumber,track:e.StopPointDesignation||e.JourneyDirection,region:"SL",href:"#",isLate:e.TimeTabledDateTime!==e.ExpectedDateTime})))}function Ce(e){const t="367eaa6107874c6e86bd985872f9cd46",n=`deviations.json?key=${t}&siteId=${e}`;return xe(n).then(e=>Ne(e.ResponseData)).then(e=>{return{messages:e.map(({Details:e})=>e)}})}function Ee(e){return e.ok&&204!==e.status?e.json():e.ok?(console.log("fetchMiddleware: not json and no error"),e):e.json().then(e=>Promise.reject(e))}function Ne(e){return e&&[].concat(e)||[]}function xe(e){const t=`${_e}/${e}`,n=`https://request-proxy.herokuapp.com/?url=${encodeURIComponent(t)}`;return fetch(n,Le).then(Ee).catch(e=>console.error(e))}var Je={getClosestStop:$e,getClosestStops:we,getDeparturesFrom:Ae,getTrafficSituations:Ce,findStops:je,init(){return Promise.resolve()}};const Fe={TV:{track:"Spår",sname:"Anmärkn."},VT:{track:"Läge",sname:"Linje"},SL:{track:"Läge",sname:"Linje"}};var Re={VT:Te,TV:W,SL:Je},Pe=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("aside",{class:[t.$style.journeyDetails,(e={},e[t.$style.display]=t.showJourneyDetails,e)]},[i("header",{class:t.$style.header},[i("h2",{class:t.$style.heading},[t._v("Detaljer")]),t.loadingJourneyDetails?i("font-awesome",{attrs:{icon:"spinner",spin:""}}):t._e(),i("button",{class:t.$style.closeBtn,on:{click:function(e){e.preventDefault(),t.setShowJourneyDetails(!1)}}},[t._v("✗")])],1),i("p",{class:t.$style.journeyMeta},[t.loadingJourneyDetails?t._e():i("span",[t._v("\n      "+t._s(t.journey.name)+" mot "+t._s(t.journey.direction)+"\n    ")]),i("a",{class:t.$style.mapLink,attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.setCurrentTab("Karta")}}},[t._v("Visa på karta")])]),t.loadingJourneyDetails?t._e():i("div",{class:t.$style.stopList},t._l(t.stops,function(e){return i("div",{key:e.depTime+e.name,class:[t.$style.stop,(n={},n[t.$style.stopPassed]=e.didPass,n)]},[i("div",{class:t.$style.stopDotCell},[i("div",{class:t.$style.stopDot})]),i("div",{class:t.$style.stopTime},[t._v("\n        "+t._s(e.rtDepTime||e.depTime)+"\n      ")]),i("div",{class:t.$style.stopName},[t._v(t._s(e.name))]),i("div",{class:t.$style.stopTrack},[t._v(t._s(e.track))])]);var n}))])},Me=[],Be={name:"JourneyDetails",data(){return{now:Date.now(),timeoutId:null}},mounted(){this.timeoutId=setInterval(()=>{this.now=Date.now()},3e4)},beforeDestroy(){clearInterval(this.timeoutId)},computed:Object(o["a"])({},Object(r["e"])(["showJourneyDetails","loadingJourneyDetails","selectedJourney"]),{journey(){const e=this.selectedJourney;if(!e)return{};const t=[].concat(e.Direction);return{name:[].concat(e.JourneyName)[0].name,direction:t[t.length-1].$}},stops(){const e=this.selectedJourney;return e?e.Stop.map(e=>{const t=new Date(`${e.depDate}T${e.depTime}`).getTime();return Object(o["a"])({},e,{didPass:t<this.now})}):[]}}),methods:Object(o["a"])({},Object(r["d"])(["setShowJourneyDetails"]),Object(r["d"])("tabs",["setCurrentTab"]))},Ue=Be,ze=n("67f8");function Ve(e){this["$style"]=ze["default"].locals||ze["default"]}var He=Object(A["a"])(Ue,Pe,Me,!1,Ve,null,null);He.options.__file="JourneyDetails.vue";var qe=He.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"location-input",class:{"with-label":e.label},on:{focus:e.showDropDown,keyup:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.hideDropDown(t):null}}},[n("label",[e._v("\n    "+e._s(e.label)+":\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{disabled:e.disabled,type:"search",placeholder:""},domProps:{value:e.searchText},on:{input:[function(t){t.target.composing||(e.searchText=t.target.value)},e.onInput],focus:e.showDropDown,blur:e.possiblyHideDropDown,keyup:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.selectFirstSuggestion(t):null},e.handleKeyInput]}}),e.isLoading?n("font-awesome",{staticClass:"location-input__spinner",attrs:{icon:"spinner",spin:"","aria-hidden":"true"}}):e._e()],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"location-input__suggestions"},[e.showUseMyLocation?n("li",{staticClass:"location-input__suggestion",on:{keyup:e.handleKeyInput}},[n("button",{on:{click:function(t){return t.preventDefault(),e.getNearbyStops(t)}}},[n("font-awesome",{attrs:{icon:"crosshairs"}}),n("span",[e._v(" "+e._s(e.nearbyStopsMessage)+" ")]),e.isLoadingNearbyStops?n("font-awesome",{attrs:{icon:"spinner",spin:""}}):e._e()],1)]):e._e(),e._l(e.nearbyStops,function(t){return e.showNearbyStops?n("li",{key:t.name,staticClass:"location-input__suggestion",on:{keyup:e.handleKeyInput}},[n("button",{on:{click:function(n){n.preventDefault(),e.onSelect(t)},keyup:function(n){if(!("button"in n)&&e._k(n.keyCode,"space",32,n.key," "))return null;e.onSelect(t)}}},[e._v(e._s(t.name))])]):e._e()}),!e.searchText||e.stops.length||e.isLoading?e._e():n("li",{staticClass:"location-input__suggestion"},[n("button",{on:{click:function(e){e.preventDefault()}}},[e._v("Inga resultat för söktermen")])]),e._l(e.stops,function(t){return n("li",{key:t.id,staticClass:"location-input__suggestion",on:{keyup:e.handleKeyInput}},[n("button",{on:{click:function(n){n.preventDefault(),e.onSelect(t)},keyup:function(n){if(!("button"in n)&&e._k(n.keyCode,"space",32,n.key," "))return null;e.onSelect(t)}}},[e._v(e._s(t.name))])])})],2)])},Qe=[],Ke={name:"LocationInput",mounted(){this.selectedLocation&&(this.searchText=this.selectedLocation.name),this.debouncedFindStops=F(this.findStops,350,this)},props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1}},data(){return{show:!1,searchText:""}},computed:Object(o["a"])({},Object(r["c"])("api",["api"]),Object(r["c"])({isLoadingNearbyStops:"user/isLoading"}),Object(r["e"])("user",["nearbyStops","nearbyStopsError"]),Object(r["e"])("stops",["stops","isLoading"]),Object(r["e"])({userLocation:({user:e})=>e.location,selectedLocation:({trips:e})=>e.location}),{nearbyStopsMessage(){return this.isLoadingNearbyStops?"Hämtar närliggande hållplatser":this.nearbyStopsError||"Använd min plats"},showUseMyLocation(){return!this.searchText&&!this.nearbyStops.length},showNearbyStops(){return!this.searchText&&this.nearbyStops.length},hasSuggestions(){return this.stops.length||this.nearbyStops.length}}),watch:{selectedLocation(e){e||(this.searchText="")}},methods:Object(o["a"])({},Object(r["b"])("user",["getUserLocation","getNearbyStops"]),Object(r["b"])("stops",["findStops"]),Object(r["b"])("trips",["updateLocation"]),{onInput({target:{value:e}}){this.debouncedFindStops(e)},onSelect(e){this.searchText=e.name,this.updateLocation(e),this.hideDropDown(),this.findStops(e.name).then(this.hideDropDown)},selectFirstSuggestion(){0!==this.stops.length&&this.onSelect(this.stops[0])},handleKeyInput(e){const t={ArrowUp:"previousElementSibling",ArrowDown:"nextElementSibling"},n="button",i=n=>n.parentElement[t[e.key]];if(["ArrowDown","ArrowUp"].includes(e.key)&&this.show&&this.hasSuggestions){const e=this.$el.querySelector(`.location-input__suggestions ${n}:focus`);if(e){const t=i(e);t&&t.querySelector(n).focus()}else this.$el.querySelector(`.location-input__suggestions ${n}`).focus()}},showDropDown(){this.show=!0},hideDropDown(){this.show=!1,document.activeElement.blur()},possiblyHideDropDown(e){e.relatedTarget&&this.$el.contains(e.relatedTarget)||this.hideDropDown()}})},Ye=Ke,Xe=(n("452a"),Object(A["a"])(Ye,Ge,Qe,!1,null,null,null));Xe.options.__file="LocationInput.vue";var We=Xe.exports,Ze=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{class:[t.$style.tripsTable,(e={},e[t.$style.VT]="VT"===t.apiName,e[t.$style.TV]="TV"===t.apiName,e[t.$style.SL]="SL"===t.apiName,e[t.$style.showingJourneyDetails]=t.showJourneyDetails,e)]},[i("table",{class:t.$style.table},[i("thead",{class:t.$style.tableHead},[i("tr",[i("th",[t._v(t._s(t.metaLabel))]),i("th",[t._v("Tid")]),i("th",[t._v(t._s(t.fromToLabel))]),i("th",{class:t.$style.tripNewTime},[t._v("Ny tid")]),i("th",[t._v(t._s(t.trackLabel))])])]),i("tbody",{class:t.$style.tableBody},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]},[i("td",{attrs:{colspan:"5"}},[t._v("\n          Hämtar trafikdata...\n          "),i("font-awesome",{attrs:{icon:"spinner",spin:""}})],1)]),t._l(t.trips,function(e){return i("tr",{key:e.id,class:[t.$style.trip,(n={},n[t.$style.cancelled]=e.cancelled,n)],on:{click:function(n){t.getJourneyDetails(e)}}},[i("td",{class:t.$style.tripLine,style:{backgroundColor:e.fgColor,color:e.bgColor}},[t._v("\n          "+t._s(e.sname)+"\n        ")]),i("td",{class:t.$style.tripTime},[i("span",{class:["only-mobile",(a={},a[t.$style.isLate]=e.isLate,a)]},[t._v(t._s(e.rtTime||e.time))]),i("span",{staticClass:"from-tablet"},[t._v(t._s(e.time))])]),i("td",{class:t.$style.tripDest},[i("div",[i("span",{class:t.$style.tripName},[t._v("\n              "+t._s(e.direction||e.origin)+"\n            ")]),e.isAffected?i("span",[t._v(" ⛔️")]):t._e(),e.cancelled?i("span",[t._v(" ⚠️ Färd inställd")]):t._e()]),i("div",{class:t.$style.tripVia},[e.via?i("small",[t._v(" via "+t._s(e.via))]):t._e()])]),i("td",{class:[t.$style.tripNewTime,t.$style.isLate]},[e.isLate?i("span",[t._v(t._s(e.rtTime))]):t._e()]),i("td",{class:t.$style.tripTrack},[t._v(t._s(e.track))])]);var n,a}),i("tr",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&t.location&&0===t.trips.length,expression:"!isLoading && location && trips.length === 0"}]},[i("td",{attrs:{colspan:"5"}},[t._v("Inga resor att visa")])])],2)])])},et=[];const tt="speechSynthesis"in window;let nt,it;function at(){nt=window.speechSynthesis.getVoices(),it=nt.find(({name:e})=>"Alva"==e)}function st(e){if(tt){var t=new SpeechSynthesisUtterance;t.text=e,t.volume=1,t.rate=.9,t.pitch=1,it?t.voice=it:console.log("Could not select voice"),window.speechSynthesis.speak(t)}}tt&&at(),window.speechSynthesis.onvoiceschanged=function(){at()};var ot={name:"TripsTable",props:{fromToLabel:{type:String,default:""}},mounted(){this.speak=F(this.speak,250,this)},computed:Object(o["a"])({},Object(r["e"])({showJourneyDetails:e=>e.showJourneyDetails,apiName:({api:e})=>e.name}),Object(r["e"])("trips",{isLoading:({isLoading:e})=>e,location:({location:e})=>e,doSpeak:({options:e})=>e.voice}),Object(r["c"])({trips:"trips/filteredTrips"}),Object(r["c"])("api",["dict"]),{metaLabel(){return this.dict.sname},trackLabel(){return this.dict.track}}),watch:{trips(e){this.speak(e)}},methods:Object(o["a"])({},Object(r["b"])(["getJourneyDetails"]),{speak(e){if(e.length<1||!this.doSpeak)return;const t=e[0],n=t.name,i=t.direction,a=t.timestamp,s=e[0].via&&`via ${e[0].via},`||"",o=Math.ceil((a-Date.now())/6e4);st(o<=0?`${n} mot ${i}, ${s} avgår nu`:1===o?`${n} mot ${i}, ${s} avgår om en minut`:o>1&&o<=60?`${n} mot ${i}, ${s} avgår om ${o} minuter`:`${n} mot ${i}, ${s} avgår om mer än en timma`)}})},rt=ot,lt=n("55a3");function ct(e){this["$style"]=lt["default"].locals||lt["default"]}var ut=Object(A["a"])(rt,Ze,et,!1,ct,null,null);ut.options.__file="TripsTable.vue";var pt=ut.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.tripsFilter},[n("div",{class:e.$style.filter},[n("font-awesome",{staticClass:"only-mobile",attrs:{icon:"filter"}}),n("span",{staticClass:"from-tablet"},[e._v("Filter:")])],1),n("div",{class:e.$style.filter},[n("select",{attrs:{name:"dest"},on:{change:e.updateFilter}},[n("option",{attrs:{value:""}},[e._v(e._s(e.fromToLabel))]),e._l(e.destinations,function(t){return n("option",{key:t,domProps:{selected:e.filter.dest===t,value:t}},[e._v(e._s(t))])})],2)]),n("div",{class:e.$style.filter},[n("select",{attrs:{name:"track"},on:{change:e.updateFilter}},[n("option",{attrs:{value:""}},[e._v("Läge")]),e._l(e.tracks,function(t){return n("option",{key:t,domProps:{selected:e.filter.track===t,value:t}},[e._v(e._s(t))])})],2)]),n("div",{class:[e.$style.filter,"from-desktop"]},[n("label",[e._v("\n      Live\n      "),n("input",{attrs:{type:"checkbox",name:"isLive"},domProps:{checked:e.options.isLive},on:{input:e.updateOption}})])]),n("div",{class:e.$style.filter},[n("label",{class:e.$style.voice},[n("font-awesome",{attrs:{icon:["fas",e.options.voice?"volume-up":"volume-off"]}}),n("input",{class:e.$style.voiceCheckbox,attrs:{type:"checkbox",name:"voice"},domProps:{checked:e.options.voice},on:{input:e.updateOption}})],1)]),n("div",{class:e.$style.filter},[n("button",{class:e.$style.refreshBtn,attrs:{title:"Uppdatera"},on:{click:function(t){t.preventDefault(),e.getTrips()}}},[n("font-awesome",{attrs:{icon:"sync"}})],1)])])},mt=[];n("55dd");function ft(e,t){const n=Number(e)||e.charCodeAt(0),i=Number(t)||t.charCodeAt(0);return n<i?-1:n>i?1:0}function ht(e){if(!(e instanceof HTMLElement))throw Error("Argument must be HTMLElement");const t=e.nodeName,n=e.name;if("SELECT"===t)return{[n]:e.selectedOptions[0].value};if("INPUT"===t){const t=["checkbox","radio"].includes(e.type)?e.checked:e.value;return{[n]:t}}throw Error(`Unhandled node type: ${e.nodeName}`)}var gt={name:"TripsFilter",props:{dict:{type:Object,default:()=>({})}},data(){return{radio:!1,timeSpans:[{value:"30",name:"30 min"},{value:"60",name:"1 timme"},{value:"120",name:"2 timmar"},{value:"180",name:"3 timmar"},{value:"360",name:"6 timmar"},{value:"720",name:"12 timmar"},{value:"1440",name:"24 timmar"}]}},computed:Object(o["a"])({},Object(r["e"])("trips",["filter","options"]),Object(r["c"])({trips:"trips/filteredTrips"}),{fromToLabel(){return this.dict.origDest},arriveDepartLabel(){return this.dict.arrEaves},destinations(){return Array.from(new Set(this.trips.map(({direction:e,origin:t})=>e||t)))},tracks(){const e=this.trips.map(({track:e})=>e).filter(e=>e).map(String);return Array.from(new Set(e)).sort(ft)}}),methods:Object(o["a"])({},Object(r["d"])("trips",["setFilter","setOptions"]),Object(r["b"])("trips",["getTrips"]),{updateFilter({target:e}){const t=ht(e);t&&this.setFilter(t)},updateOption({target:e}){const t=ht(e);t&&this.setOptions(t)}})},bt=gt,vt=n("2f3b");function yt(e){this["$style"]=vt["default"].locals||vt["default"]}var Tt=Object(A["a"])(bt,dt,mt,!1,yt,null,null);Tt.options.__file="TripsFilter.vue";var _t=Tt.exports;const Lt={arrival:{arrEaves:"Ankommer",origDest:"Från"},departure:{arrEaves:"Avgår",origDest:"Till"}};var St={name:"StationInfo",components:{LocationInput:We,JourneyDetails:qe,TripsTable:pt,TripsFilter:_t},props:{arrivals:{type:Boolean,default:!1}},data(){return{manualTrips:[]}},computed:Object(o["a"])({},Object(r["e"])("trips",["location","situations"]),Object(r["e"])("api",{apiName:({name:e})=>e,initializing:({initializing:e})=>e}),Object(r["c"])("api",["api"]),{dict(){return this.arrivals?Lt.arrival:Lt.departure},show(){return!!this.trips.length},fromToLabel(){return this.arrivals?"Från":"Till"},arriveDepartLabel(){return this.arrivals?"Ankommer":"Avgår"}}),watch:{arrivals(e,t){e!==t&&this.location&&this.getTrips(this.location)},apiName(e,t){e!==t&&(clearTimeout(this.lastTimeoutId),this.loadManualDepartures())}},mounted(){this.loadManualDepartures()},beforeDestroy(){clearTimeout(this.lastTimeoutId)},methods:Object(o["a"])({},Object(r["b"])("trips",["getTrips"]),{loadManualDepartures(){"SOMETHING THAT DOES NOT EXIST"===this.apiName&&w.getManualDepartures().then(e=>{this.manualTrips=Re.VT.transformTrips(e),console.log("this.manualTrips",this.manualTrips)})}})},Dt=St,kt=n("aeaf");function wt(e){this["$style"]=kt["default"].locals||kt["default"]}var $t=Object(A["a"])(Dt,z,V,!1,wt,null,null);$t.options.__file="StationInfo.vue";var jt=$t.exports,It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{class:e.$style.tabs},e._l(e.tabs,function(t){return n("li",{key:t.name,class:[e.$style.tab,(i={},i[e.$style.tabSmall]=t.small,i[e.$style.tabActive]=e.currentTab===t.name,i[e.$style.tabDisabled]=t.disabled,i)]},[n("a",{class:e.$style.link,attrs:{title:t.name,href:"#"},on:{click:function(e){e.preventDefault(),t.onClick(t.name,t.props.arrivals)}}},[t.icon?n("font-awesome",{class:e.$style.onlyMobile,attrs:{icon:t.icon}}):e._e(),t.initializing?e._e():n("span",{class:(a={},a[e.$style.onlyDesktop]=t.icon,a)},[e._v("\n        "+e._s(t.name)+"\n      ")]),t.initializing?n("font-awesome",{attrs:{icon:"spinner",spin:""}}):e._e()],1)]);var i,a}))},Ot=[],At={name:"TabsComponent",props:{tabs:{type:Array,default:()=>[]},onClick:{type:Function,default:()=>{}},currentTab:{type:String,default:""}}},Ct=At,Et=n("6f5f");function Nt(e){this["$style"]=Et["default"].locals||Et["default"]}var xt=Object(A["a"])(Ct,It,Ot,!1,Nt,null,null);xt.options.__file="Tabs.vue";var Jt=xt.exports;const Ft={icon:"",props:{arrivals:!1},onClick(){}},Rt=[{name:"Avgångar",componentName:"station-info"},{name:"Ankomster",componentName:"station-info",props:{arrivals:!0}},{name:"Karta",componentName:"map-component",icon:"map"},{name:"Info",componentName:"information-page",icon:"info-circle"}];var Pt={name:"App",components:{MapComponent:()=>n.e("chunk-4c1e").then(n.bind(null,"a0be")),Tabs:Jt,StationInfo:jt,DigitalClock:U,InformationPage:N},computed:Object(o["a"])({},Object(r["e"])({apiName:({api:e})=>e.name,initializing:({api:e})=>e.initializing}),Object(r["e"])("tabs",["currentTab"]),Object(r["c"])("api",["api"]),{tabs(){return[Object(o["a"])({},Ft,{name:this.apiName,small:!0,onClick:this.toggleApi,initializing:this.initializing}),...Rt.map(e=>Object(o["a"])({},Ft,e,{disabled:e.props&&e.props.arrivals&&"function"!==typeof this.api.getArrivalsTo,onClick:this.changeTab}))]},currentTabComponent(){return this.tabs.find(({name:e})=>e===this.currentTab)}}),methods:Object(o["a"])({},Object(r["d"])("trips",["setArrivals"]),Object(r["d"])("tabs",["setCurrentTab"]),Object(r["b"])("api",["toggleApi"]),{changeTab(e,t){this.setArrivals(t),this.setCurrentTab(e)}})},Mt=Pt,Bt=(n("034f"),Object(A["a"])(Mt,a,s,!1,null,null,null));Bt.options.__file="App.vue";var Ut=Bt.exports,zt=n("e7ca"),Vt=n.n(zt);const Ht={isSupported:"geolocation"in navigator,isLoading:{location:!1,nearbyStops:!1},location:null,consented:null,nearbyStops:[],nearbyStopsError:""},qt={isLoading({isLoading:e}){return e.location||e.nearbyStops}},Gt={async getNearbyStops({commit:e,dispatch:t,state:n,rootState:i,rootGetters:a}){n.isSupported&&(n.location||await t("getUserLocation"),e("setLoading",{nearbyStops:!0}),a["api/api"].getClosestStops(n.location).then(t=>{console.log("nearbySyops",t),t&&t.length&&t[0].region===i.api.name?e("setNearbyStops",t):(e("setNearbyStopsError","Hittade ingen närliggande hållplats 😥"),setTimeout(()=>e("setNearbyStopsError",""),7e3)),e("setLoading",{nearbyStops:!1})}).catch(t=>{console.error(t),e("setLoading",{nearbyStops:!1}),e("setNearbyStopsError","Något gick snett 😱")}))},getUserLocation({commit:e,state:t}){return t.isSupported?(e("setLoading",{location:!0}),new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}).then(t=>{e("setLoading",{location:!1}),e("setConsented",!0),e("setLocation",t.coords)}).catch(t=>{console.error(t),e("setLoading",{location:!1}),e("setConsented",!1)})):Promise.resolve()}},Qt={setLoading(e,t){e.isLoading=Object(o["a"])({},e.loading,t)},setConsented(e,t){e.consented=t},setLocation(e,t){e.location={lat:t.latitude,lng:t.longitude}},setNearbyStops(e,t){e.nearbyStops=t,e.nearbyStopsError=""},setNearbyStopsError(e,t){e.nearbyStopsError=t}};var Kt={namespaced:!0,state:Ht,getters:qt,actions:Gt,mutations:Qt},Yt=n("9393");const Xt=/\s*via\s*/;function Wt(e){if(Xt.test(e.direction)){const t=e.direction.split(Xt),n=Object(Yt["a"])(t,2),i=n[0],a=n[1];return Object.assign({},e,{direction:i,via:a})}return e}const Zt={track:"",dest:"",timeSpan:""},en={messages:[],affectedLines:[]},tn={isLive:!0,voice:!1},nn=Object.keys(Zt),an=Object.keys(tn),sn={arrivals:!1,filter:Object(o["a"])({},Zt),options:Object(o["a"])({},tn),trips:[],situations:Object(o["a"])({},en),isLoading:!1,location:null},on={filteredTrips({trips:e,filter:t,situations:n}){const i=t.track,a=t.dest,s=n.affectedLines,r=void 0===s?[]:s;return e.map(e=>Object(o["a"])({},e,{isAffected:r.includes(e.sname)})).filter(e=>!i||e.track===i).filter(({direction:e,origin:t})=>!a||(e===a||t===a)).sort((e,t)=>e.timestamp-t.timestamp)}},rn={getTrips({commit:e,state:t,rootGetters:n},i=t.location){const a=t.arrivals?n["api/api"]["getArrivalsTo"]:n["api/api"]["getDeparturesFrom"];return e("setLoading",!0),a(i.id,t.filter.timeSpan).then(t=>{const n=t.map(Wt);console.log("[getTrips]",n),e("setTrips",n),e("setLoading",!1)}).catch(t=>{console.error("[getTrips]",t),e("setLoading",!1)})},getTrafficSituations({commit:e,rootGetters:t},n){return t["api/api"].getTrafficSituations(n.id,"stoparea").then(t=>{console.log("situations",t),e("setSituations",t)}).catch(e=>console.error("[getTrafficSituations]",e))},updateLocation({dispatch:e,commit:t,state:n},i){n.location!==i&&(console.log("[updateLocation]",i),t("setLocation",i),e("getTrips",i),e("getTrafficSituations",i))}},ln={reset(e){e.trips=[],e.filter=Object(o["a"])({},Zt),e.location=null,e.situations=Object(o["a"])({},en)},setFilter(e,t){if(!Object.keys(t).every(e=>nn.includes(e)))return console.error("[setFilter]","Non valid key(s) supplied, must be one of",nn);e.filter=Object(o["a"])({},e.filter,t)},setOptions(e,t){if(!Object.keys(t).every(e=>an.includes(e)))return console.error("[setOptions]","Non valid key(s) supplied, must be one of",an);e.options=Object(o["a"])({},e.options,t)},setTrips(e,t){e.trips=t},setSituations(e,t){e.situations=t},setLoading(e,t){e.isLoading=t},setLocation(e,t){e.location=t},setArrivals(e,t){e.arrivals=t}};var cn={namespaced:!0,state:sn,getters:on,actions:rn,mutations:ln};const un={stops:[],isLoading:!1},pn={};let dn;const mn={findStops({commit:e,rootGetters:t},n){return n?(dn=n,e("setLoading",!0),t["api/api"].findStops(n).then(t=>{return console.log("stops",t),dn===n?(e("setLoading",!1),e("setStops",t)):console.log("skipping response"),t}).catch(t=>{console.error(t),e("setLoading",!1)})):e("setStops",[])}},fn={setStops(e,t){e.stops=t},setLoading(e,t){e.isLoading=t}};var hn={namespaced:!0,state:un,getters:pn,actions:mn,mutations:fn};const gn={currentTab:"Avgångar"},bn={setCurrentTab(e,t){e.currentTab=t}};var vn={namespaced:!0,state:gn,mutations:bn};const yn=Object.keys(Re),Tn="VT";if(!yn.includes(Tn))throw new Error("defaultApi must exist");const _n=[],Ln={name:Tn,initializing:!0},Sn={api({name:e}){return Re[e]},dict({name:e}){return Fe[e]}},Dn={setApi(e,t){e.name=t},setInitializing(e,t){e.initializing=t}},kn={initApi({commit:e,state:t}){console.info("initializing",t.name),e("setInitializing",!0),Re[t.name].init().then(()=>{e("setInitializing",!1),_n.push(t.name)}).catch(t=>{console.error("[initApi]",t),e("setInitializing",!1)})},toggleApi({state:e,commit:t,dispatch:n}){const i=yn.indexOf(e.name),a=(i+1)%yn.length,s=yn[a],o=_n.includes(s);t("setApi",s),t("trips/reset",null,{root:!0}),t("stops/setStops",[],{root:!0}),o||n("initApi")}};var wn={namespaced:!0,state:Ln,getters:Sn,mutations:Dn,actions:kn};i["a"].use(r["a"]);const $n=new Vt.a({storage:window.localStorage,reducer:e=>({trips:e.trips,api:e.api})});var jn=new r["a"].Store({strict:!1,state:{selectedJourney:null,showJourneyDetails:!1,loadingJourneyDetails:!1},getters:{},mutations:{selectJourney(e,t){e.selectedJourney=t},setShowJourneyDetails(e,t){e.showJourneyDetails=t},setLoadingJourneyDetails(e,t){e.loadingJourneyDetails=t}},actions:{getJourneyDetails({commit:e,state:t},n){if("VT"!==t.api.name||!n.JourneyDetailRef)return console.log("[getJourneyDetails]","only available for VT"),Promise.resolve();e("setShowJourneyDetails",!0),e("setLoadingJourneyDetails",!0),Re.VT.getJourneyDetail(n.JourneyDetailRef.ref).then(t=>{e("selectJourney",t),e("setLoadingJourneyDetails",!1)}).catch(t=>{console.error("[getJourneyDetails]",t),e("setLoadingJourneyDetails",!1)})}},modules:{api:wn,user:Kt,trips:cn,stops:hn,tabs:vn},plugins:[$n.plugin]}),In=n("9483");Object(In["a"])("/rasmus2.0/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var On=n("ecee"),An=n("c074"),Cn=n("7a55");On["library"].add(An["e"],An["g"],An["a"],An["c"],An["f"],An["i"],An["h"],An["d"],An["b"]),i["a"].component("font-awesome",Cn["FontAwesomeIcon"]),i["a"].config.productionTip=!1,jn.dispatch("api/initApi"),new i["a"]({store:jn,render:e=>e(Ut)}).$mount("#app")},"67f8":function(e,t,n){"use strict";var i=n("add9"),a=n.n(i);t["default"]=a.a},"68f3":function(e,t,n){e.exports={informationPage:"InformationPage_informationPage_2JzFC",editLink:"InformationPage_editLink_3mh2I",spinner:"InformationPage_spinner_3mv-F"}},"6f5f":function(e,t,n){"use strict";var i=n("9dcf"),a=n.n(i);t["default"]=a.a},"979c":function(e,t,n){"use strict";var i=n("68f3"),a=n.n(i);t["default"]=a.a},"9dcf":function(e,t,n){e.exports={tabs:"Tabs_tabs_1QR2X",tab:"Tabs_tab_15Faw",tabSmall:"Tabs_tabSmall_3oxul",tabActive:"Tabs_tabActive_5B2qN",tabApi:"Tabs_tabApi_1DbIs",tabDisabled:"Tabs_tabDisabled_2LyC1",link:"Tabs_link_3QSdo",onlyDesktop:"Tabs_onlyDesktop_2idts",onlyMobile:"Tabs_onlyMobile_33MVU"}},"9ec4":function(e,t,n){},aa4e:function(e,t,n){e.exports={stationInfo:"StationInfo_stationInfo_1Dt3D",form:"StationInfo_form_3BKgO",content:"StationInfo_content_3LXMa",situations:"StationInfo_situations_nDEmL"}},add9:function(e,t,n){e.exports={journeyDetails:"JourneyDetails_journeyDetails_3YAJj",display:"JourneyDetails_display_nRo1Q",header:"JourneyDetails_header_2FVDd",heading:"JourneyDetails_heading_1u5lY",closeBtn:"JourneyDetails_closeBtn_2AamI",journeyMeta:"JourneyDetails_journeyMeta_2_eYX",mapLink:"JourneyDetails_mapLink_1boUP",stopList:"JourneyDetails_stopList_2AU0a",stop:"JourneyDetails_stop_1ijip",stopDotCell:"JourneyDetails_stopDotCell_1gJ_N",stopDot:"JourneyDetails_stopDot_-Ig6N",stopPassed:"JourneyDetails_stopPassed_3heFC",stopTime:"JourneyDetails_stopTime_SRZYM",stopName:"JourneyDetails_stopName_1ry27",stopTrack:"JourneyDetails_stopTrack_1BnIw"}},aeaf:function(e,t,n){"use strict";var i=n("aa4e"),a=n.n(i);t["default"]=a.a},b679:function(e,t,n){e.exports={tripsFilter:"TripsFilter_tripsFilter_ZISik",filter:"TripsFilter_filter_1W5CS",voice:"TripsFilter_voice_3SGKu",voiceCheckbox:"TripsFilter_voiceCheckbox_2LW6X",refreshBtn:"TripsFilter_refreshBtn_YozBh"}},c21b:function(e,t,n){}});
//# sourceMappingURL=app.96247003.js.map